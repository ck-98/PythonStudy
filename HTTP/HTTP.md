# HTTP原理

### 五层模型
    应用层 -> 传输层 -> 网络层 -> 数据链路层 -> 物理层
    传输层主要有两个协议 TCP/IP协议和UDP协议
    TCP/IP 提供可靠的端对端的传输服务
    UDP 尽最大可能的传输服务
### TCP的三次握手和四次挥手
    HTTP传输协议依靠的是TCP协议来传输数据
    client -------------> TCP connection ----------------> 服务器
    三次握手过程
    client                      server
    -------- SYN=1, Seq=X -------------> SYN:同步 seq：序号

    <---- SYN=1,ack=X+1,Seq=Y，ACK=1 ---   ACK: 确认 ack: 确认序号
    
    ----- ACK=1,ack=Y+1,Seq=Z --------------->

    SYN 是一个标志位, 代表是一个创建请求的数据包
    三次握手的意义: 防止服务端开启无用端口，规避网络延迟而导致的服务器开销问题

    四次挥手过程
    client                  server

    ------- FIN=1, Seq=X ------->   client进入终止等待状态
    
    <------ ACK=1,Seq=Y, ack=X+1--- server进入关闭等待状态

    <------ FIN=1,ACK=1,Seq=Z,ack=Y+1 --- 进入最后确认状态

    ------- ACK=1,Seq=x+1, ack=Z+1 -----> 没有立即释放TCP链接，等待一段时间后关闭

### HTTP请求报文与响应报文
    (a) 请求报文                                                (b) 响应报文
    ┌────────────────────────────────────┐       ┌────────────────────────────────┐     
    | GET /test/hi-there.txt HTTP/1.1    │       │  HTTP/1.1 200 OK               |    起始行
    |____________________________________│       ├────────────────────────────────┤
    | Host: github.com                   │       │  Content-type: text/plain      |    首部
    | Connection: keep-alive             │       │  Content-length: 19            |
    | Accept: text/html                  |       |                                |
    |                                    |       ├────────────────────────────────┤
    └────────────────────────────────────┘       │  Hi! I'am a message!           │    主体
                                                 └────────────────────────────────┘

### URL、URI、URN区别
    URI: 统一资源标识符，包含URL.URN用来唯一标识互联网信息资源

    URL: 统一资源定位器 协议头（HTTP\FTP）域名，端口，请求数据等组成

    URN: 永久统一资源定位符

### cookie和session
    coolie：在服务端返回数据之后，通过set_cookie设置到浏览器中，并保存在浏览器中的内容
    进行下一次请求会自动带上
    浏览器保存cookie之后，在同域的请求中会带上cookie，通过传输过程中携带的cookie保证访问的数据是这个用户的
    cookie是以键值对的形式存储在客户端中
    属性：
    max-age和expires设置过期时间
    secure属性代表只有在https才会携带http不携带
    特点：
    存储的数量和字符数量都有限制
    存储在浏览器中不安全